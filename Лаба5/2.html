<html>
	<head>
		<meta charset="utf-8"></head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
	</head>
	<body>
		
		<script>
			var m = [
				{
					text: 'Животные',
					children: [
						{
							text: 'Млекопитающие',
							children: [
								{
									text: 'Коровы',
									children: []
								},
								{						
									text: 'Ослы',
									children: []
								},
								{
									text: 'Собаки',
									children: []
								},
								{
									text: 'Тигры',
									children: []
								}
							]
						},
						{
							text: 'Другие',
							children: [
								{						
									text: 'Змеи',
									children: []
								},
								{
									text: 'Птицы',
									children: []
								},
								{
									text: 'Ящерицы',
									children: []
								}
							]
						}
					]
				},
				{
					text: 'Рыбы',
					children: [
						{
							text: 'Аквариумные',
							children: [
								{
									text: 'Гуппи',
									children: []
								},
								{
									text: 'Скалярии',
									children: []
								}
							]
						},
						{
							text: 'Морские',
							children: [
								{
									text: 'Морская форель',
									children: []
								}
							]
						}	
					]
				}
			];
			function createElement(a){
				var li = $("<li>");
				li.text(a.text);
				
				if (a.children.length > 0){
					var ul = $("<ul>");
					for (var j = 0; j < a.children.length; j++){
						ul.append(createElement(a.children[j]));
					}
					li.append(ul);
				}
				
				return li;
			}
			var ul = $("<ul>");
			for (var i = 0; i < m.length; i++){
				ul.append(createElement(m[i]));
			}
			$("body").append(ul)
			
			$("li").click(function(event){
				event.stopPropagation()
				$(this).children("ul").slideToggle(500);
			})
			
			$("li").each(function() {
				var x = $(this).clone().children("ul").remove().end;
				console.log("Content: " + x.text());
				console.log("Children: " + $(this).find("li").length);
			})

		</script>
	</body>
</html>